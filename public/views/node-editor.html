<h1>Node Editor</h1>

<h2>Node: {{nec.nodeInfo.node[0].content}}</h2>
<table>
  <thead>
    <tr>
      <th>Response</th>
      <th>X</th>
      <th>Next Node Id</th>
      <th>Follow Up Question</th>
      <th>Save And Follow</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat= "response in nec.nodeInfo.responses">
      <td>{{response.response_text}}</td>
      <td>
        <button type="button" ng-click="nec.deleteResponse(response.id)">X</button>
      </td>
      <td>{{response.to_node_id}}</td>
      <td>
        <!-- If the response already has to_node_id, this field should have the existing follow up question-->
        <input ng-if="nec.nodeInfo.followUpQuestions[$index].id" type="text" ng-model="nec.nodeInfo.followUpQuestions[$index].content">

        <input ng-if="!nec.nodeInfo.followUpQuestions[$index].id" type="text" ng-model="nec.followUpQuestion" placeholder="follow-up node">
      </td>
      <td>
        <!-- If getNextQuestion function pulls data, this button should update that data instead of adding node -->
        <button ng-if="nec.nodeInfo.followUpQuestions[$index].id" type="button" class="btn" ng-click="nec.updateNodeContent(nec.nodeInfo.followUpQuestions[$index])">Update and Follow Question</button>

        <button ng-if="!nec.nodeInfo.followUpQuestions[$index].id" type="button" class="btn" ng-click="nec.addNodeToResponse(nec.followUpQuestion, response.id)">Save and Follow</button>
      </td>
    </tr>
    <tr>
      <td>
        <input type="text" ng-model="nec.newResponse">
      </td>
      <td>
        <button type="button" ng-click="nec.addResponse(nec.newResponse)">+</button>
      </td>
    </tr>
  </tbody>
</table>


<h4>nodeInfo.responses: {{nec.nodeInfo.responses}}</h4>
<h4>nodeInfo.followUpQuestions: {{nec.nodeInfo.followUpQuestions}}</h4>
<button type="button" ng-click="nec.getNodeForEachResponse()">Test Button</button>
